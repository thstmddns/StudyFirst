## 완전검색 도전

<br>

<br>

#### 테트로미노

```python
dy = [1, 0, -1, 0]
dx = [0, 1, 0, -1]


def check_four(y, x, cnt, value):
    global max_sum
    if cnt == 4:
        if value > max_sum:
            max_sum = value
    else:
        next_y = y
        next_x = x
        max_value = 0
        for d in range(4):
            ny = y + dy[d]
            nx = x + dx[d]
            if 0 <= ny < N and 0 <= nx < M and arr[ny][nx] > max_value:
                next_y, next_x = ny, nx
                max_value = arr[ny][nx]
        check_four(next_y, next_x, cnt + 1, value + max_value)


def check_three(y, x):
    global max_sum
    for t in [[0, 1, 2], [1, 2, 3], [2, 3, 0], [3, 0, 1]]:
        max_value = arr[y][x]
        for d in t:
            ny = y + dy[d]
            nx = x + dx[d]
            if 0 <= ny < N and 0 <= nx < M:
                max_value += arr[ny][nx]
            else:
                break
        else:
            if max_value > max_sum:
                max_sum = max_value


N, M = map(int, input().split())

arr = [list(map(int, input().split())) for _ in range(N)]

max_sum = 0
for i in range(N):
    for j in range(M):
        check_four(i, j, 1, arr[i][j])
        check_three(i, j)

print(max_sum)

```

<br>

<br>

#### 리모컨

```python

```

<br>

---

*end*